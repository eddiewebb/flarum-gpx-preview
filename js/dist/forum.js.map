{"version":3,"sources":["webpack://@webbinaro/gpx-preview/webpack/bootstrap","webpack://@webbinaro/gpx-preview/./forum.js","webpack://@webbinaro/gpx-preview/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@webbinaro/gpx-preview/./src/forum/File.js","webpack://@webbinaro/gpx-preview/./src/forum/GPXParser.js","webpack://@webbinaro/gpx-preview/./src/forum/gpxMap.js","webpack://@webbinaro/gpx-preview/./src/forum/index.js","webpack://@webbinaro/gpx-preview/external \"flarum.core.compat['app']\"","webpack://@webbinaro/gpx-preview/external \"flarum.core.compat['common/Model']\"","webpack://@webbinaro/gpx-preview/external \"flarum.core.compat['common/utils/mixin']\"","webpack://@webbinaro/gpx-preview/external \"flarum.core.compat['components/Post']\"","webpack://@webbinaro/gpx-preview/external \"flarum.core.compat['extend']\""],"names":["File","apiEndpoint","exists","data","id","bbcode","console","log","tag","uuid","humanSize","url","baseName","app","store","models","files","prototype","mixin","Model","attribute","path","type","size","createdAt","hidden","GPXParser","xmlDoc","map","trackcolour","trackwidth","mintrackpointdelta","setTrackColour","colour","setTrackWidth","width","setMinTrackPointDelta","delta","translateName","name","createMarker","point","lon","parseFloat","getAttribute","lat","html","pointElements","getElementsByTagName","length","i","item","childNodes","nodeValue","nodeName","attributes","attrlen","hasChildNodes","children","childrenlen","nodeType","firstChild","marker","google","maps","Marker","position","LatLng","infowindow","InfoWindow","content","Size","event","addListener","open","addTrackSegmentToMap","trackSegment","trackpoints","pointarray","lastlon","lastlat","latlng","push","latdiff","londiff","Math","sqrt","polyline","Polyline","strokeColor","strokeWeight","addTrackToMap","track","segments","segmentlatlngbounds","addRouteToMap","route","routepoints","centerAndZoom","pointlist","Array","minlat","maxlat","minlon","maxlon","pointtype","setCenter","centerlon","centerlat","bounds","LatLngBounds","fitBounds","centerAndZoomToLatLngBounds","latlngboundsarray","boundingbox","isEmpty","extend","getSouthWest","getNorthEast","centerlng","lng","getBoundsZoomLevel","addTrackpointsToMap","tracks","documentElement","addWaypointsToMap","waypoints","addRoutepointsToMap","routes","exports","Post","postId","attrs","post","loadGPXFileIntoGoogleMap","filename","$","ajax","dataType","success","debug","parser","each","forum","session","csrfToken","mapId","mapOptions","zoom","mapTypeId","Map","document","getElementById","initializers","add","gpxMap"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import app from 'flarum/app';\nimport Model from 'flarum/common/Model';\nimport mixin from 'flarum/common/utils/mixin';\nexport default class File extends mixin(Model, {\n    baseName: Model.attribute('baseName'),\n    path: Model.attribute('path'),\n    url: Model.attribute('url'),\n    type: Model.attribute('type'),\n    size: Model.attribute('size'),\n    humanSize: Model.attribute('humanSize'),\n    createdAt: Model.attribute('createdAt'),\n    uuid: Model.attribute('uuid'),\n    tag: Model.attribute('tag'),\n    hidden: Model.attribute('hidden'),\n}){\n\n\n    /**\n     * Use FoF Uploads endpoint\n     */\n    apiEndpoint() {\n        return '/fof/uploads' + (this.exists ? '/' + this.data.id : '');\n    }\n\n    /**\n     * Generate bbcode for this file\n     */\n    bbcode() {\n        console.log('checking')\n        if (this.tag() == 'gpx' ){\n            return `[upl-image uuid=${this.uuid()} size=${this.humanSize()} url=${this.url()}]${this.baseName()}[/upl-image]`;\n        }\n        return app.store.models.files.prototype.bbcode(this);\n    }\n\n\n}","///////////////////////////////////////////////////////////////////////////////\n// loadgpx.4.js\n//\n// Javascript object to load GPX-format GPS data into Google Maps.\n//\n// Copyright (C) 2006 Kaz Okuda (http://notions.okuda.ca)\n//\n// This program is free software; you can redistribute it and/or\n// modify it under the terms of the GNU General Public License\n// as published by the Free Software Foundation; either version 2\n// of the License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program; if not, write to the Free Software\n// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n//\n// If you use this script or have any questions please leave a comment\n// at http://notions.okuda.ca/geotagging/projects-im-working-on/gpx-viewer/\n// A link to the GPL license can also be found there.\n//\n///////////////////////////////////////////////////////////////////////////////\n//\n// History:\n//    revision 1 - Initial implementation\n//    revision 2 - Removed LoadGPXFileIntoGoogleMap and made it the callers\n//                 responsibility.  Added more options (colour, width, delta).\n//    revision 3 - Waypoint parsing now compatible with Firefox.\n//    revision 4 - Upgraded to Google Maps API version 2.  Tried changing the way\n//               that the map calculated the way the center and zoom level, but\n//               GMAP API 2 requires that you center and zoom the map first.\n//               I have left the bounding box calculations commented out in case\n//               they might come in handy in the future.\n//\n//    5/28/2010 - Upgraded to Google Maps API v3 and refactored the file a bit.\n//                          (Chris Peplin)\n//\n// Author: Kaz Okuda\n// URI: http://notions.okuda.ca/geotagging/projects-im-working-on/gpx-viewer/\n//\n// Updated for Google Maps API v3 by Chris Peplin\n// Fork moved to GitHub: https://github.com/peplin/gpxviewer\n//\n///////////////////////////////////////////////////////////////////////////////\n\nfunction GPXParser(xmlDoc, map) {\n    this.xmlDoc = xmlDoc;\n    this.map = map;\n    this.trackcolour = \"#ff00ff\"; // red\n    this.trackwidth = 5;\n    this.mintrackpointdelta = 0.0001\n}\n\n// Set the colour of the track line segements.\nGPXParser.prototype.setTrackColour = function(colour) {\n    this.trackcolour = colour;\n}\n\n// Set the width of the track line segements\nGPXParser.prototype.setTrackWidth = function(width) {\n    this.trackwidth = width;\n}\n\n// Set the minimum distance between trackpoints.\n// Used to cull unneeded trackpoints from map.\nGPXParser.prototype.setMinTrackPointDelta = function(delta) {\n    this.mintrackpointdelta = delta;\n}\n\nGPXParser.prototype.translateName = function(name) {\n    if(name == \"wpt\") {\n        return \"Waypoint\";\n    }\n    else if(name == \"trkpt\") {\n        return \"Track Point\";\n    }\n    else if(name == \"rtept\") {\n        return \"Route Point\";\n    }\n}\n\n\nGPXParser.prototype.createMarker = function(point) {\n    var lon = parseFloat(point.getAttribute(\"lon\"));\n    var lat = parseFloat(point.getAttribute(\"lat\"));\n    var html = \"\";\n\n    var pointElements = point.getElementsByTagName(\"html\");\n    if(pointElements.length > 0) {\n        for(i = 0; i < pointElements.item(0).childNodes.length; i++) {\n            html += pointElements.item(0).childNodes[i].nodeValue;\n        }\n    }\n    else {\n        // Create the html if it does not exist in the point.\n        html = \"<b>\" + this.translateName(point.nodeName) + \"</b><br>\";\n        var attributes = point.attributes;\n        var attrlen = attributes.length;\n        for(i = 0; i < attrlen; i++) {\n            html += attributes.item(i).name + \" = \" +\n                    attributes.item(i).nodeValue + \"<br>\";\n        }\n\n        if(point.hasChildNodes) {\n            var children = point.childNodes;\n            var childrenlen = children.length;\n            for(i = 0; i < childrenlen; i++) {\n                // Ignore empty nodes\n                if(children[i].nodeType != 1) continue;\n                if(children[i].firstChild == null) continue;\n                html += children[i].nodeName + \" = \" +\n                        children[i].firstChild.nodeValue + \"<br>\";\n            }\n        }\n    }\n\n    var marker = new google.maps.Marker({\n        position: new google.maps.LatLng(lat,lon),\n        map: this.map\n    });\n\n    var infowindow = new google.maps.InfoWindow({\n        content: html,\n        size: new google.maps.Size(50,50)\n    });\n\n    google.maps.event.addListener(marker, \"click\", function() {\n        infowindow.open(this.map, marker);\n    });\n}\n\nGPXParser.prototype.addTrackSegmentToMap = function(trackSegment, colour,\n        width) {\n    var trackpoints = trackSegment.getElementsByTagName(\"trkpt\");\n    if(trackpoints.length == 0) {\n        return;\n    }\n\n    var pointarray = [];\n\n    // process first point\n    var lastlon = parseFloat(trackpoints[0].getAttribute(\"lon\"));\n    var lastlat = parseFloat(trackpoints[0].getAttribute(\"lat\"));\n    var latlng = new google.maps.LatLng(lastlat,lastlon);\n    pointarray.push(latlng);\n\n    for(var i = 1; i < trackpoints.length; i++) {\n        var lon = parseFloat(trackpoints[i].getAttribute(\"lon\"));\n        var lat = parseFloat(trackpoints[i].getAttribute(\"lat\"));\n\n        // Verify that this is far enough away from the last point to be used.\n        var latdiff = lat - lastlat;\n        var londiff = lon - lastlon;\n        if(Math.sqrt(latdiff*latdiff + londiff*londiff)\n                > this.mintrackpointdelta) {\n            lastlon = lon;\n            lastlat = lat;\n            latlng = new google.maps.LatLng(lat,lon);\n            pointarray.push(latlng);\n        }\n\n    }\n\n    var polyline = new google.maps.Polyline({\n        path: pointarray,\n        strokeColor: colour,\n        strokeWeight: width,\n        map: this.map\n    });\n}\n\nGPXParser.prototype.addTrackToMap = function(track, colour, width) {\n    var segments = track.getElementsByTagName(\"trkseg\");\n    for(var i = 0; i < segments.length; i++) {\n        var segmentlatlngbounds = this.addTrackSegmentToMap(segments[i], colour,\n                width);\n    }\n}\n\nGPXParser.prototype.addRouteToMap = function(route, colour, width) {\n    var routepoints = route.getElementsByTagName(\"rtept\");\n    if(routepoints.length == 0) {\n        return;\n    }\n\n    var pointarray = [];\n\n    // process first point\n    var lastlon = parseFloat(routepoints[0].getAttribute(\"lon\"));\n    var lastlat = parseFloat(routepoints[0].getAttribute(\"lat\"));\n    var latlng = new google.maps.LatLng(lastlat,lastlon);\n    pointarray.push(latlng);\n\n    for(var i = 1; i < routepoints.length; i++) {\n        var lon = parseFloat(routepoints[i].getAttribute(\"lon\"));\n        var lat = parseFloat(routepoints[i].getAttribute(\"lat\"));\n\n        // Verify that this is far enough away from the last point to be used.\n        var latdiff = lat - lastlat;\n        var londiff = lon - lastlon;\n        if(Math.sqrt(latdiff*latdiff + londiff*londiff)\n                > this.mintrackpointdelta) {\n            lastlon = lon;\n            lastlat = lat;\n            latlng = new google.maps.LatLng(lat,lon);\n            pointarray.push(latlng);\n        }\n\n    }\n\n    var polyline = new google.maps.Polyline({\n        path: pointarray,\n        strokeColor: colour,\n        strokeWeight: width,\n        map: this.map\n    });\n}\n\nGPXParser.prototype.centerAndZoom = function(trackSegment) {\n\n    var pointlist = new Array(\"trkpt\", \"rtept\", \"wpt\");\n    var minlat = 0;\n    var maxlat = 0;\n    var minlon = 0;\n    var maxlon = 0;\n\n    for(var pointtype = 0; pointtype < pointlist.length; pointtype++) {\n\n        // Center the map and zoom on the given segment.\n        var trackpoints = trackSegment.getElementsByTagName(\n                pointlist[pointtype]);\n\n        // If the min and max are uninitialized then initialize them.\n        if((trackpoints.length > 0) && (minlat == maxlat) && (minlat == 0)) {\n            minlat = parseFloat(trackpoints[0].getAttribute(\"lat\"));\n            maxlat = parseFloat(trackpoints[0].getAttribute(\"lat\"));\n            minlon = parseFloat(trackpoints[0].getAttribute(\"lon\"));\n            maxlon = parseFloat(trackpoints[0].getAttribute(\"lon\"));\n        }\n\n        for(var i = 0; i < trackpoints.length; i++) {\n            var lon = parseFloat(trackpoints[i].getAttribute(\"lon\"));\n            var lat = parseFloat(trackpoints[i].getAttribute(\"lat\"));\n\n            if(lon < minlon) minlon = lon;\n            if(lon > maxlon) maxlon = lon;\n            if(lat < minlat) minlat = lat;\n            if(lat > maxlat) maxlat = lat;\n        }\n    }\n\n    if((minlat == maxlat) && (minlat == 0)) {\n        this.map.setCenter(new google.maps.LatLng(49.327667, -122.942333), 14);\n        return;\n    }\n\n    // Center around the middle of the points\n    var centerlon = (maxlon + minlon) / 2;\n    var centerlat = (maxlat + minlat) / 2;\n\n    var bounds = new google.maps.LatLngBounds(\n            new google.maps.LatLng(minlat, minlon),\n            new google.maps.LatLng(maxlat, maxlon));\n    this.map.setCenter(new google.maps.LatLng(centerlat, centerlon));\n    this.map.fitBounds(bounds);\n}\n\nGPXParser.prototype.centerAndZoomToLatLngBounds = function(latlngboundsarray) {\n    var boundingbox = new google.maps.LatLngBounds();\n    for(var i = 0; i < latlngboundsarray.length; i++) {\n        if(!latlngboundsarray[i].isEmpty()) {\n            boundingbox.extend(latlngboundsarray[i].getSouthWest());\n            boundingbox.extend(latlngboundsarray[i].getNorthEast());\n        }\n    }\n\n    var centerlat = (boundingbox.getNorthEast().lat() +\n            boundingbox.getSouthWest().lat()) / 2;\n    var centerlng = (boundingbox.getNorthEast().lng() +\n            boundingbox.getSouthWest().lng()) / 2;\n    this.map.setCenter(new google.maps.LatLng(centerlat, centerlng),\n            this.map.getBoundsZoomLevel(boundingbox));\n}\n\nGPXParser.prototype.addTrackpointsToMap = function() {\n    var tracks = this.xmlDoc.documentElement.getElementsByTagName(\"trk\");\n    for(var i = 0; i < tracks.length; i++) {\n        this.addTrackToMap(tracks[i], this.trackcolour, this.trackwidth);\n    }\n}\n\nGPXParser.prototype.addWaypointsToMap = function() {\n    var waypoints = this.xmlDoc.documentElement.getElementsByTagName(\"wpt\");\n    for(var i = 0; i < waypoints.length; i++) {\n        this.createMarker(waypoints[i]);\n    }\n}\n\nGPXParser.prototype.addRoutepointsToMap = function() {\n    var routes = this.xmlDoc.documentElement.getElementsByTagName(\"rte\");\n    for(var i = 0; i < routes.length; i++) {\n        this.addRouteToMap(routes[i], this.trackcolour, this.trackwidth);\n    }\n}\n\nexports.GPXParser = GPXParser;","import app from 'flarum/app';\nimport {extend} from 'flarum/extend';\nimport Post from 'flarum/components/Post';\nimport GPXParser from './GPXParser';\n\n/* global $ */\n\nexport default function () {\n    extend(Post.prototype, 'oncreate', function () {\n        let postId = this.attrs.post.id();\n        \n        function loadGPXFileIntoGoogleMap(map, filename) {\n            $.ajax({url: filename,\n                dataType: \"xml\",\n                success: function(data) {\n                  console.debug(\"parsing GPS file \" + filename);\n                  var parser = new GPXParser.GPXParser(data, map);\n                  parser.setTrackColour(\"#ff0000\");     // Set the track line colour\n                  parser.setTrackWidth(5);          // Set the track line width\n                  parser.setMinTrackPointDelta(0.001);      // Set the minimum distance between track points\n                  parser.centerAndZoom(data);\n                  parser.addTrackpointsToMap();         // Add the trackpoints\n                  parser.addRoutepointsToMap();         // Add the routepoints\n                  parser.addWaypointsToMap();           // Add the waypoints\n                }\n            });\n        }\n\n        //for each gpx file in this post, loop and map\n        this.$('.gpxFile').each(function( i ) {\n          //console.log(this); //'this' is now a matching div with our URL and UUID\n          //let url = $(this).data('mapUrl');\n          let url = app.forum.attribute('apiUrl') + '/fof/download';\n            url += '/' + $(this).data('fofUploadDownloadUuid');\n            url += '/' + postId;\n            url += '/' + app.session.csrfToken;\n          let mapId = 'map-' + $(this).data('fofUploadDownloadUuid');\n          console.debug(url);\n          console.debug(mapId);\n\n          var mapOptions = {\n            zoom: 8,\n            mapTypeId: 'roadmap'\n          };\n          var map = new google.maps.Map(document.getElementById(mapId),mapOptions);\n          loadGPXFileIntoGoogleMap(map, url);\n        });\n\n    });\n}\n","import app from 'flarum/app';\nimport File from './File';\n\nimport gpxMap from './gpxMap';\n\nconsole.debug(\"GPX Preview Scanning...\");\n\napp.initializers.add('gpx-preview', () => {\n    gpxMap();\n\n    // File model\n    app.store.models.files = File;\n});\n","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/utils/mixin'];","module.exports = flarum.core.compat['components/Post'];","module.exports = flarum.core.compat['extend'];"],"sourceRoot":""}