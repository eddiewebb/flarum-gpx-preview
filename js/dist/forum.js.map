{"version":3,"sources":["webpack://@webbinaro/gpx-preview/webpack/bootstrap","webpack://@webbinaro/gpx-preview/./forum.js","webpack://@webbinaro/gpx-preview/./src/forum/GPXParser.js","webpack://@webbinaro/gpx-preview/./src/forum/gpxMap.js","webpack://@webbinaro/gpx-preview/./src/forum/index.js","webpack://@webbinaro/gpx-preview/external \"flarum.core.compat['app']\"","webpack://@webbinaro/gpx-preview/external \"flarum.core.compat['components/Post']\"","webpack://@webbinaro/gpx-preview/external \"flarum.core.compat['extend']\""],"names":["GPXParser","xmlDoc","map","trackcolour","trackwidth","mintrackpointdelta","prototype","setTrackColour","colour","setTrackWidth","width","setMinTrackPointDelta","delta","translateName","name","createMarker","point","lon","parseFloat","getAttribute","lat","html","pointElements","getElementsByTagName","length","i","item","childNodes","nodeValue","nodeName","attributes","attrlen","hasChildNodes","children","childrenlen","nodeType","firstChild","marker","google","maps","Marker","position","LatLng","infowindow","InfoWindow","content","size","Size","event","addListener","open","addTrackSegmentToMap","trackSegment","trackpoints","pointarray","lastlon","lastlat","latlng","push","latdiff","londiff","Math","sqrt","polyline","Polyline","path","strokeColor","strokeWeight","addTrackToMap","track","segments","segmentlatlngbounds","addRouteToMap","route","routepoints","centerAndZoom","pointlist","Array","minlat","maxlat","minlon","maxlon","pointtype","setCenter","centerlon","centerlat","bounds","LatLngBounds","fitBounds","centerAndZoomToLatLngBounds","latlngboundsarray","boundingbox","isEmpty","extend","getSouthWest","getNorthEast","centerlng","lng","getBoundsZoomLevel","addTrackpointsToMap","tracks","documentElement","addWaypointsToMap","waypoints","addRoutepointsToMap","routes","exports","console","log","Post","isInitialized","url","$","data","loadGPXFileIntoGoogleMap","filename","ajax","dataType","success","parser","document","ready","mapOptions","zoom","mapTypeId","Map","getElementById","app","initializers","add","gpxMap"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AAAA,wC;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,SAAT,CAAmBC,MAAnB,EAA2BC,GAA3B,EAAgC;AAC5B,OAAKD,MAAL,GAAcA,MAAd;AACA,OAAKC,GAAL,GAAWA,GAAX;AACA,OAAKC,WAAL,GAAmB,SAAnB,CAH4B,CAGE;;AAC9B,OAAKC,UAAL,GAAkB,CAAlB;AACA,OAAKC,kBAAL,GAA0B,MAA1B;AACH,C,CAED;;;AACAL,SAAS,CAACM,SAAV,CAAoBC,cAApB,GAAqC,UAASC,MAAT,EAAiB;AAClD,OAAKL,WAAL,GAAmBK,MAAnB;AACH,CAFD,C,CAIA;;;AACAR,SAAS,CAACM,SAAV,CAAoBG,aAApB,GAAoC,UAASC,KAAT,EAAgB;AAChD,OAAKN,UAAL,GAAkBM,KAAlB;AACH,CAFD,C,CAIA;AACA;;;AACAV,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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","///////////////////////////////////////////////////////////////////////////////\n// loadgpx.4.js\n//\n// Javascript object to load GPX-format GPS data into Google Maps.\n//\n// Copyright (C) 2006 Kaz Okuda (http://notions.okuda.ca)\n//\n// This program is free software; you can redistribute it and/or\n// modify it under the terms of the GNU General Public License\n// as published by the Free Software Foundation; either version 2\n// of the License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program; if not, write to the Free Software\n// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n//\n// If you use this script or have any questions please leave a comment\n// at http://notions.okuda.ca/geotagging/projects-im-working-on/gpx-viewer/\n// A link to the GPL license can also be found there.\n//\n///////////////////////////////////////////////////////////////////////////////\n//\n// History:\n//    revision 1 - Initial implementation\n//    revision 2 - Removed LoadGPXFileIntoGoogleMap and made it the callers\n//                 responsibility.  Added more options (colour, width, delta).\n//    revision 3 - Waypoint parsing now compatible with Firefox.\n//    revision 4 - Upgraded to Google Maps API version 2.  Tried changing the way\n//               that the map calculated the way the center and zoom level, but\n//               GMAP API 2 requires that you center and zoom the map first.\n//               I have left the bounding box calculations commented out in case\n//               they might come in handy in the future.\n//\n//    5/28/2010 - Upgraded to Google Maps API v3 and refactored the file a bit.\n//                          (Chris Peplin)\n//\n// Author: Kaz Okuda\n// URI: http://notions.okuda.ca/geotagging/projects-im-working-on/gpx-viewer/\n//\n// Updated for Google Maps API v3 by Chris Peplin\n// Fork moved to GitHub: https://github.com/peplin/gpxviewer\n//\n///////////////////////////////////////////////////////////////////////////////\n\nfunction GPXParser(xmlDoc, map) {\n    this.xmlDoc = xmlDoc;\n    this.map = map;\n    this.trackcolour = \"#ff00ff\"; // red\n    this.trackwidth = 5;\n    this.mintrackpointdelta = 0.0001\n}\n\n// Set the colour of the track line segements.\nGPXParser.prototype.setTrackColour = function(colour) {\n    this.trackcolour = colour;\n}\n\n// Set the width of the track line segements\nGPXParser.prototype.setTrackWidth = function(width) {\n    this.trackwidth = width;\n}\n\n// Set the minimum distance between trackpoints.\n// Used to cull unneeded trackpoints from map.\nGPXParser.prototype.setMinTrackPointDelta = function(delta) {\n    this.mintrackpointdelta = delta;\n}\n\nGPXParser.prototype.translateName = function(name) {\n    if(name == \"wpt\") {\n        return \"Waypoint\";\n    }\n    else if(name == \"trkpt\") {\n        return \"Track Point\";\n    }\n    else if(name == \"rtept\") {\n        return \"Route Point\";\n    }\n}\n\n\nGPXParser.prototype.createMarker = function(point) {\n    var lon = parseFloat(point.getAttribute(\"lon\"));\n    var lat = parseFloat(point.getAttribute(\"lat\"));\n    var html = \"\";\n\n    var pointElements = point.getElementsByTagName(\"html\");\n    if(pointElements.length > 0) {\n        for(i = 0; i < pointElements.item(0).childNodes.length; i++) {\n            html += pointElements.item(0).childNodes[i].nodeValue;\n        }\n    }\n    else {\n        // Create the html if it does not exist in the point.\n        html = \"<b>\" + this.translateName(point.nodeName) + \"</b><br>\";\n        var attributes = point.attributes;\n        var attrlen = attributes.length;\n        for(i = 0; i < attrlen; i++) {\n            html += attributes.item(i).name + \" = \" +\n                    attributes.item(i).nodeValue + \"<br>\";\n        }\n\n        if(point.hasChildNodes) {\n            var children = point.childNodes;\n            var childrenlen = children.length;\n            for(i = 0; i < childrenlen; i++) {\n                // Ignore empty nodes\n                if(children[i].nodeType != 1) continue;\n                if(children[i].firstChild == null) continue;\n                html += children[i].nodeName + \" = \" +\n                        children[i].firstChild.nodeValue + \"<br>\";\n            }\n        }\n    }\n\n    var marker = new google.maps.Marker({\n        position: new google.maps.LatLng(lat,lon),\n        map: this.map\n    });\n\n    var infowindow = new google.maps.InfoWindow({\n        content: html,\n        size: new google.maps.Size(50,50)\n    });\n\n    google.maps.event.addListener(marker, \"click\", function() {\n        infowindow.open(this.map, marker);\n    });\n}\n\nGPXParser.prototype.addTrackSegmentToMap = function(trackSegment, colour,\n        width) {\n    var trackpoints = trackSegment.getElementsByTagName(\"trkpt\");\n    if(trackpoints.length == 0) {\n        return;\n    }\n\n    var pointarray = [];\n\n    // process first point\n    var lastlon = parseFloat(trackpoints[0].getAttribute(\"lon\"));\n    var lastlat = parseFloat(trackpoints[0].getAttribute(\"lat\"));\n    var latlng = new google.maps.LatLng(lastlat,lastlon);\n    pointarray.push(latlng);\n\n    for(var i = 1; i < trackpoints.length; i++) {\n        var lon = parseFloat(trackpoints[i].getAttribute(\"lon\"));\n        var lat = parseFloat(trackpoints[i].getAttribute(\"lat\"));\n\n        // Verify that this is far enough away from the last point to be used.\n        var latdiff = lat - lastlat;\n        var londiff = lon - lastlon;\n        if(Math.sqrt(latdiff*latdiff + londiff*londiff)\n                > this.mintrackpointdelta) {\n            lastlon = lon;\n            lastlat = lat;\n            latlng = new google.maps.LatLng(lat,lon);\n            pointarray.push(latlng);\n        }\n\n    }\n\n    var polyline = new google.maps.Polyline({\n        path: pointarray,\n        strokeColor: colour,\n        strokeWeight: width,\n        map: this.map\n    });\n}\n\nGPXParser.prototype.addTrackToMap = function(track, colour, width) {\n    var segments = track.getElementsByTagName(\"trkseg\");\n    for(var i = 0; i < segments.length; i++) {\n        var segmentlatlngbounds = this.addTrackSegmentToMap(segments[i], colour,\n                width);\n    }\n}\n\nGPXParser.prototype.addRouteToMap = function(route, colour, width) {\n    var routepoints = route.getElementsByTagName(\"rtept\");\n    if(routepoints.length == 0) {\n        return;\n    }\n\n    var pointarray = [];\n\n    // process first point\n    var lastlon = parseFloat(routepoints[0].getAttribute(\"lon\"));\n    var lastlat = parseFloat(routepoints[0].getAttribute(\"lat\"));\n    var latlng = new google.maps.LatLng(lastlat,lastlon);\n    pointarray.push(latlng);\n\n    for(var i = 1; i < routepoints.length; i++) {\n        var lon = parseFloat(routepoints[i].getAttribute(\"lon\"));\n        var lat = parseFloat(routepoints[i].getAttribute(\"lat\"));\n\n        // Verify that this is far enough away from the last point to be used.\n        var latdiff = lat - lastlat;\n        var londiff = lon - lastlon;\n        if(Math.sqrt(latdiff*latdiff + londiff*londiff)\n                > this.mintrackpointdelta) {\n            lastlon = lon;\n            lastlat = lat;\n            latlng = new google.maps.LatLng(lat,lon);\n            pointarray.push(latlng);\n        }\n\n    }\n\n    var polyline = new google.maps.Polyline({\n        path: pointarray,\n        strokeColor: colour,\n        strokeWeight: width,\n        map: this.map\n    });\n}\n\nGPXParser.prototype.centerAndZoom = function(trackSegment) {\n\n    var pointlist = new Array(\"trkpt\", \"rtept\", \"wpt\");\n    var minlat = 0;\n    var maxlat = 0;\n    var minlon = 0;\n    var maxlon = 0;\n\n    for(var pointtype = 0; pointtype < pointlist.length; pointtype++) {\n\n        // Center the map and zoom on the given segment.\n        var trackpoints = trackSegment.getElementsByTagName(\n                pointlist[pointtype]);\n\n        // If the min and max are uninitialized then initialize them.\n        if((trackpoints.length > 0) && (minlat == maxlat) && (minlat == 0)) {\n            minlat = parseFloat(trackpoints[0].getAttribute(\"lat\"));\n            maxlat = parseFloat(trackpoints[0].getAttribute(\"lat\"));\n            minlon = parseFloat(trackpoints[0].getAttribute(\"lon\"));\n            maxlon = parseFloat(trackpoints[0].getAttribute(\"lon\"));\n        }\n\n        for(var i = 0; i < trackpoints.length; i++) {\n            var lon = parseFloat(trackpoints[i].getAttribute(\"lon\"));\n            var lat = parseFloat(trackpoints[i].getAttribute(\"lat\"));\n\n            if(lon < minlon) minlon = lon;\n            if(lon > maxlon) maxlon = lon;\n            if(lat < minlat) minlat = lat;\n            if(lat > maxlat) maxlat = lat;\n        }\n    }\n\n    if((minlat == maxlat) && (minlat == 0)) {\n        this.map.setCenter(new google.maps.LatLng(49.327667, -122.942333), 14);\n        return;\n    }\n\n    // Center around the middle of the points\n    var centerlon = (maxlon + minlon) / 2;\n    var centerlat = (maxlat + minlat) / 2;\n\n    var bounds = new google.maps.LatLngBounds(\n            new google.maps.LatLng(minlat, minlon),\n            new google.maps.LatLng(maxlat, maxlon));\n    this.map.setCenter(new google.maps.LatLng(centerlat, centerlon));\n    this.map.fitBounds(bounds);\n}\n\nGPXParser.prototype.centerAndZoomToLatLngBounds = function(latlngboundsarray) {\n    var boundingbox = new google.maps.LatLngBounds();\n    for(var i = 0; i < latlngboundsarray.length; i++) {\n        if(!latlngboundsarray[i].isEmpty()) {\n            boundingbox.extend(latlngboundsarray[i].getSouthWest());\n            boundingbox.extend(latlngboundsarray[i].getNorthEast());\n        }\n    }\n\n    var centerlat = (boundingbox.getNorthEast().lat() +\n            boundingbox.getSouthWest().lat()) / 2;\n    var centerlng = (boundingbox.getNorthEast().lng() +\n            boundingbox.getSouthWest().lng()) / 2;\n    this.map.setCenter(new google.maps.LatLng(centerlat, centerlng),\n            this.map.getBoundsZoomLevel(boundingbox));\n}\n\nGPXParser.prototype.addTrackpointsToMap = function() {\n    var tracks = this.xmlDoc.documentElement.getElementsByTagName(\"trk\");\n    for(var i = 0; i < tracks.length; i++) {\n        this.addTrackToMap(tracks[i], this.trackcolour, this.trackwidth);\n    }\n}\n\nGPXParser.prototype.addWaypointsToMap = function() {\n    var waypoints = this.xmlDoc.documentElement.getElementsByTagName(\"wpt\");\n    for(var i = 0; i < waypoints.length; i++) {\n        this.createMarker(waypoints[i]);\n    }\n}\n\nGPXParser.prototype.addRoutepointsToMap = function() {\n    var routes = this.xmlDoc.documentElement.getElementsByTagName(\"rte\");\n    for(var i = 0; i < routes.length; i++) {\n        this.addRouteToMap(routes[i], this.trackcolour, this.trackwidth);\n    }\n}\n\nexports.GPXParser = GPXParser;","import app from 'flarum/app';\nimport {extend} from 'flarum/extend';\nimport Post from 'flarum/components/Post';\nimport GPXParser from './GPXParser';\n\n/* global $ */\n\nconsole.log(GPXParser.default);\n\nexport default function () {\n    extend(Post.prototype, 'config', function (isInitialized) {\n        if (isInitialized) return;\n        //console.log(this);\n        //console.log(this.$('.gpxFile').data('fofUploadDownloadUuid'));\n\n\n        let url = this.$('.gpxFile').data('mapUrl');\n        console.log(url);\n\n        console.log(url);\n         function loadGPXFileIntoGoogleMap(map, filename) {\n            $.ajax({url: filename,\n                dataType: \"xml\",\n                success: function(data) {\n                    console.log(\"parsing\");\n                  var parser = new GPXParser.GPXParser(data, map);\n                  parser.setTrackColour(\"#ff0000\");     // Set the track line colour\n                  parser.setTrackWidth(5);          // Set the track line width\n                  parser.setMinTrackPointDelta(0.001);      // Set the minimum distance between track points\n                  parser.centerAndZoom(data);\n                  parser.addTrackpointsToMap();         // Add the trackpoints\n                  parser.addRoutepointsToMap();         // Add the routepoints\n                  parser.addWaypointsToMap();           // Add the waypoints\n                }\n            });\n        }\n\n        $(document).ready(function() {\n            var mapOptions = {\n              zoom: 8,\n              mapTypeId: 'roadmap'\n            };\n            var map = new google.maps.Map(document.getElementById(\"map\"),\n                mapOptions);\n            console.log(\"loading\");\n            loadGPXFileIntoGoogleMap(map, url);\n        });\n    });\n}\n","import app from 'flarum/app';\n\nimport gpxMap from './gpxMap';\n\nconsole.log(\"RUNNING\")\n\napp.initializers.add('gpx-preview', () => {\n    gpxMap();\n});\n","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Post'];","module.exports = flarum.core.compat['extend'];"],"sourceRoot":""}